{% extends "base.html" %}

{% set active = "graph" %}

{% block head %}
    <link href="../static/css/netjsongraph.css" rel="stylesheet">
    <link href="../static/css/netjsongraph-theme.css" rel="stylesheet">
    <style>
        body{ overflow: hidden }
        /* legend */
        #legend{
            position: absolute;
            top: auto;
            left: 5px;
            bottom: 5px;
            width: auto;
            height: auto;
            max-width: 250px;
            padding: 0 15px;
            background: #fbfbfb;
            border-radius: 2px;
            border: 1px solid #ccc;
            color: #6d6357;
            font-family: Arial, sans-serif;
            font-family: sans-serif;
            font-size: 14px;
        }
        #legend p{ line-height: 16px; margin: 10px 0 }
        #legend span{
            width: 16px;
            margin-right: 5px;
        }
        #legend span.circle{
            display: inline-block;
            border-radius: 50%;
            height: 16px;
        }
        #legend span.link{
            display: inline-block;
            height: 5px;
            border-bottom-width: 6px;
            border-bottom-style: solid;
        }
        #legend .node{ background-color: red }
        #legend .up{ background-color: blue }
        #legend .wireless_10k{ border-color: red }
        #legend .wireless_50k{ border-color: yellow }
        #legend .wireless_100k{ border-color: green }
        #legend .ethernet{ border-color: #3333ff }
        #legend .fiber{ border-color: #9900cc }

        #legend .njg-node{ background-color: red }
        #legend .njg-node.up{ background-color: blue !important }
        #legend .over1Gbit { border-color: #9900ff }
        #legend .over100Mbit{ border-color: #6666ff }
        #legend .over50Mbit{ border-color: green }
        #legend .over10Mbit{ border-color: yellow }
        #legend .over5Mbit{ border-color: #ff9900 }
        #legend .under5Mbit{ border-color: red }

        .njg-node{ fill: red }
        .njg-node.up{ fill: blue !important }
        .over1Gbit { stroke: #9900ff }
        .over100Mbit { stroke: #6666ff }
        .over50Mbit { stroke: green }
        .over10Mbit { stroke: yellow }
        .over5Mbit { stroke: #ff9900 }
        .under5Mbit { stroke: red }
    </style>
{% endblock %}

{% block content %}
        <div id="legend">
            <p><span class="circle up">&nbsp;</span> Node up</p>
            <p><span class="circle node">&nbsp;</span> Node down</p>
            <p><span class="link over1Gbit">&nbsp;</span> Over 1Gbit</p>
            <p><span class="link over100Mbit">&nbsp;</span> Over 100Mbitt</p>
            <p><span class="link over50Mbit">&nbsp;</span> Over 50Mbit</p>
            <p><span class="link over10Mbit">&nbsp;</span> Over 10Mbitt</p>
            <p><span class="link over5Mbit">&nbsp;</span> Over 5Mbit</p>
            <p><span class="link under5Mbit">&nbsp;</span> Under 5Mbit</p>
        </div>
        <script src="{{ url_for('static', filename='js/d3.min.js') }}"></script>
        <script src="{{ url_for('static', filename='js/netjsongraph.js') }}"></script>
        <script type="text/javascript">
            d3.netJsonGraph("/graph-json",
               {
                    linkDistance: 150,
                    charge: -200,
                    circleRadius: 12,
                    defaultStyle: false,
                    linkClassProperty: "rate_type",
                    nodeClassProperty: "up"
                }
            );
        </script>
{% endblock %}
